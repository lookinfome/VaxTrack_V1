@model v1Remastered.Dto.UserDetailsDto_UserProfile

@{
    @* format UID *@
    string Uid = @Model.UserUid;
    string FormattedUid = string.Format("{0}-{1}-{2}-{3}", 
                                        Uid.Substring(0, 3), 
                                        Uid.Substring(3, 3), 
                                        Uid.Substring(6, 3), 
                                        Uid.Substring(9, 3));
}

<div class="container">
    <div class="row">

        <div class="col-lg-12 col-md-12 col-sm-12 user-profile-details">

            @* user name *@
            <div class="user-name d-flex justify-content-between">
                <h2>
                    @if(@Model.UserRole == false)
                    {
                        <i class="fas fa-user"></i>
                    }
                    else
                    {
                        <i class="fas fa-user-shield"></i>
                    } 
                    @Model.Username 
                </h2>
                <h5 class="mt-2"> <i class="fas fa-id-badge"></i> @Model.UserId </h5>
            </div>

            @* user personal details *@
            <h5 class="mt-5"> <i class="fas fa-user"></i> Personal Details </h5>
            <div class="user-personal-detials mt-2 d-flex justify-content-between">
                <div>
                    <span style="font-weight: 600;"> 
                        <i class="fas fa-birthday-cake"></i> Date of Birth <br>  
                    </span> 
                    @Model.UserBirthdate.ToString("yyyy-MM-dd") 
                </div>
                
                <div>
                    <span style="font-weight: 600;" > <i class="fas fa-venus-mars"></i> Gender <br> </span>
                    @if(Model.UserGender == "M") { <span><b>Male</b></span> }
                    @if(Model.UserGender == "F") { <span><b>Female</b></span> }
                    @if(Model.UserGender == "O") { <span><b>Other</b></span> }
                </div>

                <div>
                    <span style="font-weight: 600;"> <i class="fas fa-phone"></i> Contact <br> </span>
                    <b>@Model.UserPhone</b>
                </div>

                <div>
                    <span style="font-weight: 600;"> <i class="fas fa-id-card"></i> Unique ID <br>  </span>
                    <b>@FormattedUid</b>
                </div>

            </div>
            
            @* user vaccination details *@
            <h5 class="mt-5"> <i class="fas fa-notes-medical"></i> Vaccination Details </h5>
            <dv class="user-vaccine-details mt-2 d-flex justify-content-between">

                @* vaccination id *@
                <div>
                    <span style="font-weight: 600;"> 
                        <i class="fas fa-bookmark"></i> Vaccination ID <br>  
                    </span>
                    @Model.UserVaccineDetails.UserId
                </div>

                @* vaccination status *@
                <div>
                    <span style="font-weight: 600; ">
                        @if(Model.UserVaccineDetails.UserVaccinationStatus.ToLower() != "vaccinated")
                        {
                            <i style="color:tomato; text-shadow: 0px 1px 10px red;" class="fas fa-wifi"></i>
                        }
                        else
                        {
                            <i style="color:green; text-shadow: 0px 1px 10px lime;" class="fas fa-wifi"></i>
                        }
                         Vaccination Status <br>
                    </span>
                    @Model.UserVaccineDetails.UserVaccinationStatus
                </div>

                @* dose 1 approve date *@
                <div>
                    <span style="font-weight: 600;">
                        @if(Model.UserBookingDetails.Dose1ApproveDate == DateTime.MinValue)
                        {
                            <i style="color: tomato; text-shadow: 0px 1px 10px red;" class="fas fa-exclamation"></i>
                        }
                        else 
                        {
                            <i style="color: green; text-shadow: 0px 1px 10px lime;" class="fas fa-check"></i>
                        } 
                        Dose 1 Approve Date
                    </span>
                    <br>
                    @if(Model.UserBookingDetails.Dose1BookDate == DateTime.MinValue){ <p>NA</p> }
                    else if(Model.UserBookingDetails.Dose1BookDate != DateTime.MinValue){ <p>Pending</p> }
                    else { @Model.UserBookingDetails.Dose2ApproveDate }
                </div>

                @* dose 2 approve date *@
                <div class="mx-4">
                    <span style="font-weight: 600;">
                        @if(Model.UserBookingDetails.Dose2ApproveDate == DateTime.MinValue)
                        {
                            <i style="color: tomato; text-shadow: 0px 1px 10px red;" class="fas fa-exclamation"></i>
                        }
                        else 
                        {
                            <i style="color: green; text-shadow: 0px 1px 10px lime;" class="fas fa-check"></i>
                        } Dose 2 Approve Date
                    </span>
                    <br>
                    @if(Model.UserBookingDetails.Dose2BookDate == DateTime.MinValue){ <p>NA</p> }
                    else if(Model.UserBookingDetails.Dose2BookDate != DateTime.MinValue){ <p>Pending</p> }
                    else { @Model.UserBookingDetails.Dose2ApproveDate }
                </div>


            </dv>

            @* additional booking details *@
            <h5 class="mt-5"> <i class="fas fa-book-medical"></i> Booking Details </h5>
            <div class="user-booking-details mt-2">
                <div class="mb-4">
                    <span style="font-weight: 600;">
                        <i class="fas fa-bookmark"></i> Booking ID
                    </span>
                    <br>
                    @Model.UserBookingDetails.BookingId
                </div>

                @* Dose 1 Details *@
                <div class="d-flex justify-content-between">
                    <div>
                        <span style="font-weight: 600;">
                            <i class="fas fa-calendar-alt"></i> Dose 1 Date
                        </span>
                        <br>
                        @if(Model.UserBookingDetails.Dose1BookDate == DateTime.MinValue){ <p>NA</p> }
                        else {@Model.UserBookingDetails.Dose1BookDate.ToString("yyyy-MM-dd")}
                    </div>
                    <div>
                        <span style="font-weight: 600;">
                            <i class="fas fa-hospital"></i> Dose 1 Center Name
                        </span>
                        <br>
                        @* @Model.UserBookingDetails.D1HospitalId *@
                        @ViewBag.D1HospitalName
                    </div>
                    <div>
                        <span style="font-weight: 600;">
                            <i class="fas fa-sort-numeric-up"></i> Dose 1 Slot Number
                        </span>
                        <br>
                        @if(Model.UserBookingDetails.D1SlotNumber == -1){ <p>NA</p> }
                        else { @Model.UserBookingDetails.D1SlotNumber }
                    </div>

                    @* Dose 2 Details *@
                    <div>
                        <span style="font-weight: 600;">
                            <i class="fas fa-calendar-alt"></i> Dose 2 Date
                        </span>
                        <br>
                        @if(Model.UserBookingDetails.Dose1BookDate == DateTime.MinValue){ <p>NA</p> }
                        else {@Model.UserBookingDetails.Dose1BookDate.ToString("yyyy-MM-dd")}
                    </div>
                    <div>
                        <span style="font-weight: 600;">
                            <i class="fas fa-hospital"></i> Dose 2 Center Name
                        </span>
                        <br>
                        @* @Model.UserBookingDetails.D2HospitalId *@
                        @ViewBag.D2HospitalName
                    </div>
                    <div>
                        <span style="font-weight: 600;">
                            <i class="fas fa-sort-numeric-up"></i> Dose 2 Slot Number
                        </span>
                        <br>
                        @if(Model.UserBookingDetails.D2SlotNumber == -1){ <p>NA</p> }
                        else { @Model.UserBookingDetails.D2SlotNumber }
                    </div>
                </div>
            </div>

            @* slot booking link *@
            <div class="user-vaccine-details mt-5">
                @if(string.IsNullOrEmpty(Model.UserBookingDetails.BookingId))
                {
                    <a class="slot-book-submit" href="@Url.Action("Booking", "Booking", new {userid = Model.UserId})">Book Slots</a>
                }
            </div>


        </div>

    </div>
</div>
